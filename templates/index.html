{{define "content"}}
<h1>dns records</h1>
<table border="1">
<tr><th>name</th><th>type</th><th>value</th><th>ttl</th><th>action</th></tr>
{{range $name, $recs := .Records}}
  <!-- DEBUG: Processing record for name: {{$name}} -->
  {{range $recs}}
    <!-- DEBUG: Processing sub-record for name: {{$name}} -->
    <tr>
      <td>{{$name}}</td>
      <td>{{if eq .Type_ 1}}A{{else if eq .Type_ 2}}NS{{else if eq .Type_ 5}}CNAME{{else if eq .Type_ 28}}AAAA{{else if eq .Type_ 16}}TXT{{else}}?{{end}}</td>
      <td>{{rrValue .}}</td>
      <td>{{.TTL}}</td>
      <td>
        <form method="post" style="display:inline">
          <input type="hidden" name="del" value="{{$name}}">
          <input type="hidden" name="delType" value="{{if eq .Type_ 1}}A{{else if eq .Type_ 2}}NS{{else if eq .Type_ 5}}CNAME{{else if eq .Type_ 28}}AAAA{{else if eq .Type_ 16}}TXT{{end}}">
          {{if eq .Type_ 16}}
            <input type="hidden" name="delValue" value="{{rrValue .}}">
          {{else}}
            <input type="hidden" name="delValue" value="{{rrValue .}}">
          {{end}}
          <button type="submit">delete</button>
        </form>
      </td>
    </tr>
  {{end}}
{{end}}
</table>
<h2>add record</h2>
<form method="post">
  <input name="name" placeholder="name (eg: domain.com.)">
  <select name="type">
    <option value="A">A</option>
    <option value="AAAA">AAAA</option>
    <option value="NS">NS</option>
    <option value="CNAME">CNAME</option>
    <option value="TXT">TXT</option>
  </select>
  <input name="value" placeholder="value (ip, domain, or text)">
  <input name="ttl" placeholder="ttl" type="number" value="3600">
  <button type="submit">add</button>
</form>
<h2>Analytics</h2>
<table border="1">
  <tr><th>Period</th><th>Requests</th><th>Errors</th><th>Not Found</th></tr>
  <tr><td>Last 24h</td><td>{{index (index .Analytics "24h") "request"}}</td><td>{{index (index .Analytics "24h") "error"}}</td><td>{{index (index .Analytics "24h") "notfound"}}</td></tr>
  <tr><td>Last 7d</td><td>{{index (index .Analytics "7d") "request"}}</td><td>{{index (index .Analytics "7d") "error"}}</td><td>{{index (index .Analytics "7d") "notfound"}}</td></tr>
  <tr><td>Last 30d</td><td>{{index (index .Analytics "30d") "request"}}</td><td>{{index (index .Analytics "30d") "error"}}</td><td>{{index (index .Analytics "30d") "notfound"}}</td></tr>
</table>
{{end}}
